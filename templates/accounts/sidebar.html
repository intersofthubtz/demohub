{% load static %}

<aside
  :class="sidebarOpen ? 'w-64' : 'w-20'"
  class="bg-[#0F5391] text-white flex flex-col transition-all duration-300 h-screen">

  <!-- BRAND -->
  <div class="px-4 py-4 flex items-center justify-between border-b border-blue-800">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow">
        <img src="{% static 'images/kih.png' %}"
             alt="Kumbuka"
             class="object-contain transition-all duration-300"
             :class="sidebarOpen ? 'w-8 h-8' : 'w-6 h-6'"/>
      </div>
      <span x-show="sidebarOpen" x-cloak
            class="text-lg font-semibold tracking-wide whitespace-nowrap">
        DEMO SYSTEM
      </span>
    </div>

    <button @click="sidebarOpen = !sidebarOpen"
            class="text-white/80 hover:text-white">
      <!-- menu icon -->
      <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
           viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>

  <hr class="border-white-800"/>

  <!-- MENU -->
  <nav class="flex-1 px-2 py-4 space-y-1 text-sm overflow-y-auto">

    <!-- Dashboard -->
    {% if sidebar_perms.dashboard %}
    <a href="{% url 'accounts:dashboard' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg transition
       {% if request.resolver_match.app_name == 'accounts' %}
         bg-blue-700 text-white
       {% else %}
         text-white/80 hover:bg-blue-700 hover:text-white
       {% endif %}">
       
      <!-- icon -->
      <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" stroke-width="2"
           viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3" />
      </svg>

      <span x-show="sidebarOpen" x-cloak>Dashboard</span>
    </a>
    {% endif %}

    <!-- Demo -->
    {% if sidebar_perms.demo %}
    <a href="{% url 'demo:demo_list' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg transition
       {% if request.resolver_match.app_name == 'demo' %}
         bg-blue-700 text-white
       {% else %}
         text-white/80 hover:bg-blue-700 hover:text-white
       {% endif %}">
       
      <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" stroke-width="2"
           viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 6v6l4 2M12 20a8 8 0 100-16 8 8 0 000 16z" />
      </svg>

      <span x-show="sidebarOpen" x-cloak>Demo</span>
    </a>
    {% endif %}

    <!-- Hub -->
    {% if sidebar_perms.hub %}
    <a href="{% url 'hub:hub_list' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg transition
       {% if request.resolver_match.app_name == 'hub' %}
         bg-blue-700 text-white
       {% else %}
         text-white/80 hover:bg-blue-700 hover:text-white
       {% endif %}">
       
      <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" stroke-width="2"
           viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253" />
      </svg>

      <span x-show="sidebarOpen" x-cloak>Hub</span>
    </a>
    {% endif %}

    <!-- Setup -->
    {% if sidebar_perms.setup %}
    <a href="{% url 'setup:setup' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg transition
       {% if request.resolver_match.app_name == 'setup' %}
         bg-blue-700 text-white
       {% else %}
         text-white/80 hover:bg-blue-700 hover:text-white
       {% endif %}">
       
      <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" stroke-width="2"
           viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M11.983 13.826a2 2 0 100-3.652 2 2 0 000 3.652z" />
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09a1.65 1.65 0 00-1-1.51 1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 11-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09a1.65 1.65 0 001.51-1 1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 112.83-2.83l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 112.83 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9c0 .7.4 1.33 1.01 1.62.61.29 1.35.38 1.99.38a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" />
      </svg>

      <span x-show="sidebarOpen" x-cloak>Setup</span>
    </a>
    {% endif %}

  </nav>
</aside>
